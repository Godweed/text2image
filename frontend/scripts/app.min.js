var txt2img=function(l){function j(i){i="0x"+i;return{r:i>>16,g:i>>8&255,b:i&255}}var k=md5(l);var o=k.match(/.{1,6}/g);var d=1200;var c=document.getElementById("canvas");var m=c.getContext("2d");m.canvas.width=m.canvas.height=d;m.fillStyle="#000";m.fillRect(0,0,d,d);var b=Math.round(parseInt(o[5],16)*100/255)/100;var h=j(o[4]);var f="rgba("+h.r+", "+h.g+", "+h.b+", "+b+")";m.fillStyle=f;m.fillRect(0,0,d,d);for(var p=0;p<4;p++){var e=null;var g=d;switch(p){case 3:e=m.createRadialGradient(0,d,0,0,d,g);break;case 2:e=m.createRadialGradient(d,d,0,d,d,g);break;case 1:e=m.createRadialGradient(d,0,0,d,0,g);break;case 0:e=m.createRadialGradient(0,0,0,0,0,g);break}var q=j(o[p]);e.addColorStop(0,"rgba("+q.r+", "+q.g+", "+q.b+", 1)");e.addColorStop(1,"rgba("+q.r+", "+q.g+", "+q.b+", 0)");m.fillStyle=e;m.fillRect(0,0,d,d)}var a=m.canvas.toDataURL("image/png");var n="text2image.moro.es-"+k.substr(0,8)+".png";var s=document.getElementById("i");s.setAttribute("width",400);s.setAttribute("height",400);s.setAttribute("src",a);s.setAttribute("alt",k);var r=document.getElementById("l");r.innerHTML="Download Generated Image";r.setAttribute("href",a);r.setAttribute("title",k);r.setAttribute("download",n);return{string:l,hash:k,image:a}};function convert(d){var b=txt2img(d);document.querySelector("#dl").style.display="block";document.querySelector("#ds").textContent=b.string;document.querySelector("#dh").textContent=b.hash;var e=window.getComputedStyle(document.querySelector("#o"),null).getPropertyValue("position");if(e=="static"){window.location.href="#o"}var a=window.location.href;a=a.split("?");for(var c=0;c<social_networks.length;c++){document.querySelector("#"+social_networks[c]["id"]).href=a[0]+"?s="+b.string}}var social_networks=[{id:"fb",name:"Facebook",url:"http://www.facebook.com/sharer.php?u={url}&t={title}"},{id:"tw",name:"Twitter",url:"http://twitter.com/share?text={title}&url={url}&via=alterebro&hashtags=txt2img,MD5"},{id:"gp",name:"G+",url:"https://plusone.google.com/_/+1/confirm?hl=en&url={url}"}];window.onload=function(){window.data_input=document.querySelector("#s");var e=document.createElement("canvas");e.setAttribute("id","canvas");document.getElementById("o").appendChild(e);e.style.display="none";var a="";a+='<li>[ <a id="l"></a> ]</li>';a+='<li><strong>string</strong> : <em id="ds"></em></li>';a+='<li><strong>hash</strong> : <em id="dh"></em></li>';share_output='<li id="sh"><strong>Share</strong> : <em>';for(var d=0;d<social_networks.length;d++){share_output+='<a href="'+window.location.href+'" id="'+social_networks[d]["id"]+'" onclick="open_sharer(this.href, this.id); return false;">'+social_networks[d]["name"]+"</a>";share_output+=(d<social_networks.length-1)?" / ":""}share_output+="</em></li>";a+=share_output;var b=document.getElementById("dl");if(b===null){var b=document.createElement("ul");b.setAttribute("id","dl");b.innerHTML=a;document.querySelector("main").appendChild(b);b.style.display="none"}else{b.innerHTML+=share_output}data_input.focus();document.getElementById("f").onsubmit=function(){convert(data_input.value);return false}};function open_sharer(c,e){var f={};for(var d=0;d<social_networks.length;d++){f[social_networks[d]["id"]]=social_networks[d]["url"]}var b=f[e].replace(/\{url\}/,encodeURIComponent(c)).replace(/\{title\}/,encodeURIComponent(document.title));var a=window.open(b,e+"-share","height=350,width=600");a.focus()};